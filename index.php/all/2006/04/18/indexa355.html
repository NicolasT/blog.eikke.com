<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<!-- Mirrored from blog.eikke.com/index.php/all/2006/04/18/?blog=1&m=20060418 by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:50:24 GMT -->
<head> 
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>
	All Blogs - Archives for: April 2006, 18</title>
<base  />
<meta name="description" content="" />
<meta name="keywords" content="ikke eikke blog" />
<meta name="generator" content="b2evolution 1.8.6" /> <!-- Please leave this for stats -->
<link rel="alternate" type="text/xml" title="RDF" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS .92" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS 2.0" href="http://eikke.com/feed/" />
<link rel="alternate" type="application/atom+xml" title="Atom" href="http://eikke.com/feed/" />
<link rel="pingback" href="../../../../../xmlsrv/xmlrpc.php" />
<link rel="stylesheet" href="../../../../../skins/plain/style.css" type="text/css" />

</head>

<body>
<a name="top" id="top"></a>
<center>
		<div id="menu">
				<a href="../../../../all.html" title="The blog front page">home</a>
<a href="../../../../../htsrv/login963b.html?redirect_to=http%3A%2F%2Fblog.eikke.com%2Findex.php%2Fall%2F2006%2F04%2F18%2F%3Fblog%3D1%26amp%3Bm%3D20060418" title="Login if you have an account...">Login...</a>
<a href="../../../../all03a1.html?disp=comments">Last comments</a>
		</div>
		
		<div id="header">


      <h1><a href="../../../../all.html" style="border:0px;">All Blogs</a></h1>
      <h2></h2>
		</div>
		
		<div id="content">
		
				
				<div id="sidebar">
<div class="submenu">
<div class="boxTop">&nbsp;</div><div class="menuBox"><a href="../../../../all.html" class="menuItem" title="All Blogs">Blog All</a>
<a href="../../../../ikke.html" class="menuItem" title="Ikke&#039;s Blog">Ikke</a>
<a href="../../../../fedorastateless.html" class="menuItem" title="Fedora Stateless @ UGent">FSU</a>
<a href="../../../../realnitro.html" class="menuItem" title="RealNitro&#039;s Blog">RealNitro</a>
<a href="http://peterdedecker.net/blog/index.php" class="menuItem" title="Peter&#039;s Blog">Peter</a>
</div></div>

		<p></p>
<div class="postBox"><div class="boxTop">Categories</div><h4><a href="../../../../all.html">All Blogs</a></h4>
<h4><a href="../../../../ikke.html">Ikke's Blog</a></h4>
<ul><li><a href="../../../../allb5e7.html?cat=15">Life</a> <span class="notes">(56)</span></li>
<li><a href="../../../../all3f99.html?cat=16">Technology</a> <span class="notes">(131)</span><ul><li><a href="../../../../all3cd0.html?cat=49">Coding Corner</a> <span class="notes">(64)</span><ul><li><a href="../../../../allbff0.html?cat=52">Docbook</a> <span class="notes">(7)</span></li>
<li><a href="../../../../alle864.html?cat=63">Summer of Code 06</a> <span class="notes">(0)</span></li>
</ul>
</li>
<li><a href="../../../../all8e7f.html?cat=19">Desktop</a> <span class="notes">(93)</span></li>
<li><a href="../../../../all7f33.html?cat=31">Ivman</a> <span class="notes">(3)</span></li>
<li><a href="../../../../allc055.html?cat=17">Linux</a> <span class="notes">(90)</span></li>
<li><a href="../../../../all6c5d.html?cat=18">Networks</a> <span class="notes">(14)</span></li>
</ul>
</li>
</ul>
<h4><a href="../../../../fedorastateless.html">Fedora Stateless @ UGent</a></h4>
<ul><li><a href="../../../../allede2.html?cat=32">General</a> <span class="notes">(10)</span></li>
<li><a href="../../../../allb97c.html?cat=30">Nifty solutions</a> <span class="notes">(3)</span></li>
<li><a href="../../../../allaeb3.html?cat=29">Problems we encounter</a> <span class="notes">(9)</span></li>
<li><a href="../../../../allb60a.html?cat=27">Project status and progress</a> <span class="notes">(13)</span></li>
</ul>
<h4><a href="../../../../realnitro.html">RealNitro's Blog</a></h4>
<ul><li><a href="../../../../alld11d.html?cat=54">Coding</a> <span class="notes">(9)</span></li>
<li><a href="../../../../allc733.html?cat=38">Fun</a> <span class="notes">(2)</span></li>
<li><a href="../../../../all97dc.html?cat=33">Gaming</a> <span class="notes">(4)</span><ul><li><a href="../../../../all9ad7.html?cat=35">CUBE</a> <span class="notes">(3)</span></li>
<li><a href="../../../../all9591.html?cat=37">Max Payne</a> <span class="notes">(0)</span></li>
<li><a href="../../../../alla88f.html?cat=36">RTCW:ET</a> <span class="notes">(2)</span></li>
</ul>
</li>
<li><a href="../../../../allf528.html?cat=47">Life</a> <span class="notes">(11)</span></li>
<li><a href="../../../../all8dbd.html?cat=50">Linux</a> <span class="notes">(7)</span></li>
<li><a href="../../../../all489b.html?cat=34">Webdesign</a> <span class="notes">(4)</span></li>
</ul>
<h4><a href="http://peterdedecker.net/blog/index.php">Peter's Blog</a></h4>
<ul><li><a href="../../../../all363a.html?cat=45">Free Software</a> <span class="notes">(9)</span><ul><li><a href="../../../../allb0b4.html?cat=48">Jabber</a> <span class="notes">(4)</span></li>
<li><a href="../../../../all51fa.html?cat=40">Linux</a> <span class="notes">(9)</span><ul><li><a href="../../../../allffca.html?cat=41">My Gentoo</a> <span class="notes">(19)</span></li>
<li><a href="../../../../allf170.html?cat=53">Ubuntu@AMD64</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../all434a.html?cat=57">Workgroup Free Software</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../alle7dd.html?cat=59">Internet &amp; Blogs</a> <span class="notes">(12)</span></li>
<li><a href="../../../../alle8fb.html?cat=39">Life &amp; Fun</a> <span class="notes">(47)</span></li>
<li><a href="../../../../all1e3b.html?cat=55">Politics</a> <span class="notes">(16)</span><ul><li><a href="../../../../allfa15.html?cat=51">EU Software Patents</a> <span class="notes">(8)</span></li>
<li><a href="../../../../all848d.html?cat=58">N-VA</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../all667c.html?cat=43">Studies</a> <span class="notes">(23)</span><ul><li><a href="../../../../all493d.html?cat=62">Siemens</a> <span class="notes">(13)</span></li>
</ul>
</li>
<li><a href="../../../../alle868.html?cat=60">UGent &amp; Stuver</a> <span class="notes">(18)</span></li>
<li><a href="../../../../allac94.html?cat=42">VTK</a> <span class="notes">(10)</span></li>
</ul>

</div>
<div class="boxTop"><a href="../../../../all03a1.html?disp=comments">Last comments</a></div>
<div class="postBox">	

  <ul>
<li>- louboutin on <a href="../../../../ikke/2005/12/23/crosswords.html#c11861" title="permalink to comment">Crosswords</a>

</li>
<li>- rhinestone motif on <a href="../../../../ikke/2005/11/19/ooo2_on_770.html#c11860" title="permalink to comment">OOo2 on 770</a>

</li>
<li>- richard on <a href="../../../../ikke/2007/05/08/openoffice_rant.html#c11859" title="permalink to comment">OpenOffice rant</a>

</li>
<li>- Tom on <a href="../../../../ikke/2005/01/31/gob_signals_walkthrough.html#c11858" title="permalink to comment">GOB signals walkthrough</a>

</li>
<li>- Tom on <a href="../../../../ikke/2005/01/31/gob_signals_walkthrough.html#c11857" title="permalink to comment">GOB signals walkthrough</a>

</li>
        </ul>
</div>

<div class="postBox"><table class="bCalendarTable" cellspacing="0" summary="Monthly calendar with links to each day's posts">
<caption class="bCalendarCaption"><a href="../index.html" title="go to month's archive">April 2006</a></caption>
<thead><tr class="bCalendarRow">
<th class="bCalendarHeaderCell" abbr="Sunday" scope="col" title="Sunday">Sun</th>
<th class="bCalendarHeaderCell" abbr="Monday" scope="col" title="Monday">Mon</th>
<th class="bCalendarHeaderCell" abbr="Tuesday" scope="col" title="Tuesday">Tue</th>
<th class="bCalendarHeaderCell" abbr="Wednesday" scope="col" title="Wednesday">Wed</th>
<th class="bCalendarHeaderCell" abbr="Thursday" scope="col" title="Thursday">Thu</th>
<th class="bCalendarHeaderCell" abbr="Friday" scope="col" title="Friday">Fri</th>
<th class="bCalendarHeaderCell" abbr="Saturday" scope="col" title="Saturday">Sat</th>
</tr></thead>
<tfoot>
<tr>
<td colspan="2" id="prev"><a href="../../../2005/04/index.html" title="Previous year (2005-04)">&lt;&lt;</a>&nbsp;<a href="../../03/index.html" title="Previous month (2006-03)">&lt;</a></td>
<td colspan="3" class="center"><a href="../../../2012/12/index.html">Current</a></td><td colspan="2" id="next">&nbsp;<a href="../../05/index.html" title="Next month (2006-05)">&gt;</a>&nbsp;<a href="../../../2007/04/index.html" title="Next year (2007-04)">&gt;&gt;</a></td>
</tr>
</tfoot>
<tr class="bCalendarRow">
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarCell">1</td>
<td class="bCalendarCell">2</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">3</td>
<td class="bCalendarCell">4</td>
<td class="bCalendarCell">5</td>
<td class="bCalendarCell">6</td>
<td class="bCalendarCell">7</td>
<td class="bCalendarCell">8</td>
<td class="bCalendarCell">9</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">10</td>
<td class="bCalendarLinkPost"><a href="../11/index.html" title="1 post">11</a></td>
<td class="bCalendarLinkPost"><a href="../12/index.html" title="1 post">12</a></td>
<td class="bCalendarCell">13</td>
<td class="bCalendarCell">14</td>
<td class="bCalendarCell">15</td>
<td class="bCalendarCell">16</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarLinkPost"><a href="../17/index.html" title="1 post">17</a></td>
<td class="bCalendarLinkPost"><a href="index.html" title="1 post">18</a></td>
<td class="bCalendarLinkPost"><a href="../19/index.html" title="1 post">19</a></td>
<td class="bCalendarCell">20</td>
<td class="bCalendarCell">21</td>
<td class="bCalendarCell">22</td>
<td class="bCalendarCell">23</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">24</td>
<td class="bCalendarLinkPost"><a href="../25/index.html" title="1 post">25</a></td>
<td class="bCalendarLinkPost"><a href="../26/index.html" title="1 post">26</a></td>
<td class="bCalendarCell">27</td>
<td class="bCalendarCell">28</td>
<td class="bCalendarCell">29</td>
<td class="bCalendarLinkPost"><a href="../30/index.html" title="1 post">30</a></td>
</tr>
</table></div>
<div class="postBox"><div class="boxTop">Archives</div><ul><li><a href="../../../2007/12/index.html">December 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/11/index.html">November 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../../2007/10/index.html">October 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/09/index.html">September 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../../2007/08/index.html">August 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="../../../2007/05/index.html">May  2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/04/index.html">April 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="../../../2007/03/index.html">March 2007</a> <span class="dimmed">(5)</span></li>
<li><a href="../../../2007/02/index.html">February 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/01/index.html">January 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../10/index.html">October 2006</a> <span class="dimmed">(2)</span></li>
<li><a href="../../08/index.html">August 2006</a> <span class="dimmed">(1)</span></li>
<li><a href="../../../../all1579.html?disp=arcdir">More...</a></li>
</ul>
</div>

<!-- =============== SEARCH BOX ======================== --> 
<div class="boxTop">Search</div>
<div class="postBox"><form action="http://blog.eikke.com/index.php/all" method="get" id="searchform">	<br />	<div align="center"><input class="search" size="15" name="s" /><br />
        <input type="submit" value="Search" name="submit" class="btn"  />
        </div>
</form>
</div>
<div class="postBox">
<h3 class="boxTop">Who's Online?</h3>
	<ul class="onlineUsers"><li>Guest Users: 360</li></ul>	</div>

			
<div class="boxTop">Syndicate this blog <img src="../../../../../img/xml.html" alt="XML" width="36" height="14" class="middle" /></div>               
	<div class="postBox">
RSS 0.92: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all7f88.html?tempskin=_rss&amp;disp=comments">Comments</a>
<br />
RSS 1.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all374e.html?tempskin=_rdf&amp;disp=comments">Comments</a>
<br />
RSS 2.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all6fea.html?tempskin=_rss2&amp;disp=comments">Comments</a>
<br />
Atom: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all5609.html?tempskin=_atom&amp;disp=comments">Comments</a>
</div>		

<!-- Menu footer -->
<br /> <div align="center">powered by<br />
<a href="http://b2evolution.net/" title="b2evolution home"><img src="../../../../../img/b2evolution_logo_80.html" alt="b2evolution" width="80" height="17" border="0" class="middle" /></a></div>
				</div>
						
						
				<div id="mainbar">

<h2>Archives for: April <a href="../../index.html">2006</a>, 18</h2><!-- 
== START OF MAIN AREA
====== -->

<h2>04/18/06</h2><div class="bPost" lang="en-US">
		<div class="title">More CDIS spam</div>
	<div class="bText">
		<p>First of all: Evolution is sooooo "1337":<br />
<center><img src="http://www.eikke.com/files/evo-hex2.png" title="EvoHex" /></center></p>

<p>Guess what: I've been thinking some more about CDIS. Yesterday I had a little discussion about it on #gnome-hackers with Robot101, who seems to have some good knowledge of D-BUS. Obviously, he rejected the idea of adding one more daemon. Indeed, it shouldn't be there, I hate it myself too, but currently it's the only solution to get things working.<br />
He suggested to specify some well-known service and object names, and call methods on the desired services that way. This is not a possible solution though: think of someone running 2 VoIP softphones (eg Ekiga and Skype), 2 IM clients (Gossip for Jabber, aMSN for MSNP),... A service is unique for one application.</p>

<p>So some other solution should be found.<br />
The best one, IMHO, is to add a method to the org.freedesktop.DBus service/object, something like "GetObjectsByInterface", which accepts a string, and returns an array of (servicename, objectpath) tupples, both strings. Using that one can do a specific call on all objects that need to be called.</p>

<p>Next to that, there's the versioning issue. If I remember correctly, a long long time ago this has been discussed on the D-BUS mailing list, and people decided interface versioning support wouldn't be added to D-BUS. As the CDIS interface specifications won't ever be "final", it should be possible to get around this.<br />
It's not that hard though. We can use the standard x.y versioning system, x.y is backwards compatible with x.(y-1), so in a version bump from x.y to x.(y+1) only methods or signals can be added. Bumping x allows a complete API break.<br />
Like this, if we release version 1.2 of the org.freedesktop.CDIS.FooInterface interface, and application FooApp got an object implementing this interface version, it should register itself to the D-BUS sessionbus, and tell it it implements org.freedesktop.CDIS.FooInterface.1.0, org.freedesktop.CDIS.FooInterface.1.1 and org.freedesktop.CDIS.FooInterface.1.2. Now if some other application wants to call a function added in version 1.1 of our spec, it just checks what service/objectpath pairs implement org.freedesktop.CDIS.1.1, and calls the method(s).<br />
All this can be done behind the scenes by some helper library that makes it easier to make applications CDIS-aware.</p>

<p>As now is the time to come up with some project for Google's Summer of Code, I think it'd be great to work on this (now don't steal the idea). The only issue is: <b>would someone be willing to mentor this</b>?<br />
I'd like to do the initial work somewhere under the hood of the GNOME project, if that'd be possible/allowed/accepted.</p>

<p>Here's a TODO:</p>
<ul><li>Add the previously described method to the D-BUS service</li>
<li>Come up with some XML format to define CDIS interfaces, including interface version support</li>
<li><p>Write code generators that generate helper libraries based on these XML descriptions. Some ideas:</p>
<ul><li>Plain C: using vtables with function pointers</li>
<li>GObject: standard GObject things like signals and GObject interfaces</li>
<li>Python: decorators</li>
<li>CLI/C#: decorators too</li></ul>
<p>The helpers should use the language-native D-BUS bindings, which makes things easier to debug (IMHO)</p></li>
<li>Write up an initial interface for some specific service type, and make some projects ("servers") aware of it</li>
<li>Change some other applications ("clienst") so they can make use of the servers</li></ul>

<p>Regarding the helper libs: these should abstract the complete D-BUS backend and versioning issues from the actual application. An application should just initialize it, say "Hey, I'm a MusicPlayer, I want to support version x.y of the org.freedesktop.CDIS.MusicPlayer interface, here are my callbacks".<br />
In pseudocode:</p><pre><code>/* Hello world, I want to implement a CDIS interface */
CdisMusicPlayer *cdis_self = cdis_musicplayer_new("1.2", "com.eikke.CoolPlayer", "/com/eikke/CoolPlayer/CDISController");
/* When a client makes a "pause" call to apps implementing org.freedesktop.CDIS.MusicPlayer, please jump to myapp_playback_pause
 * This uses D-BUS methods
 */
cdis_musicplayer_set_playback_pause_cb(cdis_self, myapp_playback_pause);
/* Hey listeners out there, I started playback
 * This sends out a D-BUS signal
 */
cdis_musicplayer_playback_started(cdis_self);</code></pre>

<p>Next to the server object, there are clients:</p><pre><code>/* Hey, I'd like to control music players. I support version 1.5 of the org.freedesktop.CDIS.MusicPlayer interface */
CdisMusicPlayerClient *c = cdis_musicplayer_client_new_with_bus("1.5", my_dbus_connection);
/* If a player starts, please run this callback */
cdis_mediaplayer_client_set_playback_started_cb(c, playback_started);
/* Tell all MusicPlayers to pause */
cdis_mediaplayer_client_pause(c);</code></pre><p>Maybe the "object" instance isn't even necessary!</p>

<p>Behind the scenes, when the client calls cdis_musicplayer_client_pause(), the helper will know this method was added in version 1.1 of the specification. It will request a list of all service/object-pairs that implement the org.freedesktop.CDIS.MusicPlayer.1.1 interface from the D-BUS service, and do the Pause() call on all returned objects.<br />
When the server "connects" to the system, telling it implements version 1.2 of the spec, the helper will connect to the session bus and will tell the D-BUS system the object implements org.freedesktop.CDIS.MusicPlayer.1.0, org.freedesktop.CDIS.MusicPlayer.1.1 and org.freedesktop.CDIS.MusicPlayer.1.2.</p>

<p>Like this it should be fairly trivial to make existing and new applications CDIS aware. And that's the way it should be ;-)</p>

<p>Obviously, an application could use "pure" D-BUS calls to handle all this itself too. But why make things so complicated?</p>

<p>Next to that, it should be possible to write "testkits" too, based on the XML specs. Python might be very usefull here. One test then looks up the highest version of the spec, and executes all methods new in this version on all objects claiming to implement the interface. Then it takes the last-but-one version, and does the same thing, all the way down to x.0. This way an application developer can easily check whether his application is CDIS compliant. This needs some more thinking though ;-)</p>

<p>Anyway, lots of things to be done, and obviously, not all of this can be done in only 2 or 3 months. Still, some results/progress can be made, and I'm 99% certain incorporating this in the desktop would be a great thing.<br />
I know one should just apply for SoC without thinking about a mentor. I would like to know someone'd want to be mine though before applying (just to be on the safe side), so if these things interest you and you want to get some experience on the mentor side of things, please let me know!</p>			</div>
         <div class="bSmallPrint">
	  <a href="../../../../ikke/2006/04/18/more_cdis_spam.html" title="Permanent link to full entry" class="permalink_right"><img src="../../../../../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="../../../../all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  10:06:12 pm	  .

          1062 Words          .
	  
	<a href="../../../../ikke3f99.html?cat=16" title="true">Technology</a>, <a href="../../../../ikkec055.html?cat=17" title="true">Linux</a>, <a href="../../../../ikke8e7f.html?cat=19" title="true">Desktop</a>, <a href="../../../../ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	1856 views	
	 . <a href="../../../../ikke/2006/04/18/more_cdis_spam.html#comments" title="Display comments / Leave a comment">7 comments</a>	  	</div>
	</div>

<p class="center"><strong>
		</strong></p>

	
							
						
		  </div>
		
  </div>
  <br clear="all" />
  <div id="footer">
  <!-- This is the footer. Put all your copyright info here. -->
  <br />
  Design by <a href="http://www.jameskoster.co.uk/">James Koster</a>, Evoskin by <a href="http://www.brendoman.com/dbc">Danny Ferguson</a></div>
</center>
</body>

<!-- Mirrored from blog.eikke.com/index.php/all/2006/04/18/?blog=1&m=20060418 by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:50:24 GMT -->
</html>
