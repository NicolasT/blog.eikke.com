<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<!-- Mirrored from blog.eikke.com/index.php/all/2005/11/19/ by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:33:13 GMT -->
<head> 
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>
	All Blogs - Archives for: November 2005, 19</title>
<base  />
<meta name="description" content="" />
<meta name="keywords" content="ikke eikke blog" />
<meta name="generator" content="b2evolution 1.8.6" /> <!-- Please leave this for stats -->
<link rel="alternate" type="text/xml" title="RDF" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS .92" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS 2.0" href="http://eikke.com/feed/" />
<link rel="alternate" type="application/atom+xml" title="Atom" href="http://eikke.com/feed/" />
<link rel="pingback" href="../../../../../xmlsrv/xmlrpc.php" />
<link rel="stylesheet" href="../../../../../skins/plain/style.css" type="text/css" />

</head>

<body>
<a name="top" id="top"></a>
<center>
		<div id="menu">
				<a href="../../../../all.html" title="The blog front page">home</a>
<a href="../../../../../htsrv/login6419.html?redirect_to=http%3A%2F%2Fblog.eikke.com%2Findex.php%2Fall%2F2005%2F11%2F19%2F%3Fblog%3D1%26amp%3Bm%3D20051119" title="Login if you have an account...">Login...</a>
<a href="../../../../all03a1.html?disp=comments">Last comments</a>
		</div>
		
		<div id="header">


      <h1><a href="../../../../all.html" style="border:0px;">All Blogs</a></h1>
      <h2></h2>
		</div>
		
		<div id="content">
		
				
				<div id="sidebar">
<div class="submenu">
<div class="boxTop">&nbsp;</div><div class="menuBox"><a href="../../../../all.html" class="menuItem" title="All Blogs">Blog All</a>
<a href="../../../../ikke.html" class="menuItem" title="Ikke&#039;s Blog">Ikke</a>
<a href="../../../../fedorastateless.html" class="menuItem" title="Fedora Stateless @ UGent">FSU</a>
<a href="../../../../realnitro.html" class="menuItem" title="RealNitro&#039;s Blog">RealNitro</a>
<a href="http://peterdedecker.net/blog/index.php" class="menuItem" title="Peter&#039;s Blog">Peter</a>
</div></div>

		<p></p>
<div class="postBox"><div class="boxTop">Categories</div><h4><a href="../../../../all.html">All Blogs</a></h4>
<h4><a href="../../../../ikke.html">Ikke's Blog</a></h4>
<ul><li><a href="../../../../allb5e7.html?cat=15">Life</a> <span class="notes">(56)</span></li>
<li><a href="../../../../all3f99.html?cat=16">Technology</a> <span class="notes">(131)</span><ul><li><a href="../../../../all3cd0.html?cat=49">Coding Corner</a> <span class="notes">(64)</span><ul><li><a href="../../../../allbff0.html?cat=52">Docbook</a> <span class="notes">(7)</span></li>
<li><a href="../../../../alle864.html?cat=63">Summer of Code 06</a> <span class="notes">(0)</span></li>
</ul>
</li>
<li><a href="../../../../all8e7f.html?cat=19">Desktop</a> <span class="notes">(93)</span></li>
<li><a href="../../../../all7f33.html?cat=31">Ivman</a> <span class="notes">(3)</span></li>
<li><a href="../../../../allc055.html?cat=17">Linux</a> <span class="notes">(90)</span></li>
<li><a href="../../../../all6c5d.html?cat=18">Networks</a> <span class="notes">(14)</span></li>
</ul>
</li>
</ul>
<h4><a href="../../../../fedorastateless.html">Fedora Stateless @ UGent</a></h4>
<ul><li><a href="../../../../allede2.html?cat=32">General</a> <span class="notes">(10)</span></li>
<li><a href="../../../../allb97c.html?cat=30">Nifty solutions</a> <span class="notes">(3)</span></li>
<li><a href="../../../../allaeb3.html?cat=29">Problems we encounter</a> <span class="notes">(9)</span></li>
<li><a href="../../../../allb60a.html?cat=27">Project status and progress</a> <span class="notes">(13)</span></li>
</ul>
<h4><a href="../../../../realnitro.html">RealNitro's Blog</a></h4>
<ul><li><a href="../../../../alld11d.html?cat=54">Coding</a> <span class="notes">(9)</span></li>
<li><a href="../../../../allc733.html?cat=38">Fun</a> <span class="notes">(2)</span></li>
<li><a href="../../../../all97dc.html?cat=33">Gaming</a> <span class="notes">(4)</span><ul><li><a href="../../../../all9ad7.html?cat=35">CUBE</a> <span class="notes">(3)</span></li>
<li><a href="../../../../all9591.html?cat=37">Max Payne</a> <span class="notes">(0)</span></li>
<li><a href="../../../../alla88f.html?cat=36">RTCW:ET</a> <span class="notes">(2)</span></li>
</ul>
</li>
<li><a href="../../../../allf528.html?cat=47">Life</a> <span class="notes">(11)</span></li>
<li><a href="../../../../all8dbd.html?cat=50">Linux</a> <span class="notes">(7)</span></li>
<li><a href="../../../../all489b.html?cat=34">Webdesign</a> <span class="notes">(4)</span></li>
</ul>
<h4><a href="http://peterdedecker.net/blog/index.php">Peter's Blog</a></h4>
<ul><li><a href="../../../../all363a.html?cat=45">Free Software</a> <span class="notes">(9)</span><ul><li><a href="../../../../allb0b4.html?cat=48">Jabber</a> <span class="notes">(4)</span></li>
<li><a href="../../../../all51fa.html?cat=40">Linux</a> <span class="notes">(9)</span><ul><li><a href="../../../../allffca.html?cat=41">My Gentoo</a> <span class="notes">(19)</span></li>
<li><a href="../../../../allf170.html?cat=53">Ubuntu@AMD64</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../all434a.html?cat=57">Workgroup Free Software</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../alle7dd.html?cat=59">Internet &amp; Blogs</a> <span class="notes">(12)</span></li>
<li><a href="../../../../alle8fb.html?cat=39">Life &amp; Fun</a> <span class="notes">(47)</span></li>
<li><a href="../../../../all1e3b.html?cat=55">Politics</a> <span class="notes">(16)</span><ul><li><a href="../../../../allfa15.html?cat=51">EU Software Patents</a> <span class="notes">(8)</span></li>
<li><a href="../../../../all848d.html?cat=58">N-VA</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="../../../../all667c.html?cat=43">Studies</a> <span class="notes">(23)</span><ul><li><a href="../../../../all493d.html?cat=62">Siemens</a> <span class="notes">(13)</span></li>
</ul>
</li>
<li><a href="../../../../alle868.html?cat=60">UGent &amp; Stuver</a> <span class="notes">(18)</span></li>
<li><a href="../../../../allac94.html?cat=42">VTK</a> <span class="notes">(10)</span></li>
</ul>

</div>
<div class="boxTop"><a href="../../../../all03a1.html?disp=comments">Last comments</a></div>
<div class="postBox">	

  <ul>
<li>- louboutin on <a href="../../../../ikke/2005/12/23/crosswords.html#c11861" title="permalink to comment">Crosswords</a>

</li>
<li>- rhinestone motif on <a href="../../../../ikke/2005/11/19/ooo2_on_770.html#c11860" title="permalink to comment">OOo2 on 770</a>

</li>
<li>- richard on <a href="../../../../ikke/2007/05/08/openoffice_rant.html#c11859" title="permalink to comment">OpenOffice rant</a>

</li>
<li>- Tom on <a href="../../../../ikke/2005/01/31/gob_signals_walkthrough.html#c11858" title="permalink to comment">GOB signals walkthrough</a>

</li>
<li>- Tom on <a href="../../../../ikke/2005/01/31/gob_signals_walkthrough.html#c11857" title="permalink to comment">GOB signals walkthrough</a>

</li>
        </ul>
</div>

<div class="postBox"><table class="bCalendarTable" cellspacing="0" summary="Monthly calendar with links to each day's posts">
<caption class="bCalendarCaption"><a href="../index.html" title="go to month's archive">November 2005</a></caption>
<thead><tr class="bCalendarRow">
<th class="bCalendarHeaderCell" abbr="Sunday" scope="col" title="Sunday">Sun</th>
<th class="bCalendarHeaderCell" abbr="Monday" scope="col" title="Monday">Mon</th>
<th class="bCalendarHeaderCell" abbr="Tuesday" scope="col" title="Tuesday">Tue</th>
<th class="bCalendarHeaderCell" abbr="Wednesday" scope="col" title="Wednesday">Wed</th>
<th class="bCalendarHeaderCell" abbr="Thursday" scope="col" title="Thursday">Thu</th>
<th class="bCalendarHeaderCell" abbr="Friday" scope="col" title="Friday">Fri</th>
<th class="bCalendarHeaderCell" abbr="Saturday" scope="col" title="Saturday">Sat</th>
</tr></thead>
<tfoot>
<tr>
<td colspan="2" id="prev"><a href="../../../2004/11/index.html" title="Previous year (2004-11)">&lt;&lt;</a>&nbsp;<a href="../../10/index.html" title="Previous month (2005-10)">&lt;</a></td>
<td colspan="3" class="center"><a href="../../../2012/12/index.html">Current</a></td><td colspan="2" id="next">&nbsp;<a href="../../12/index.html" title="Next month (2005-12)">&gt;</a>&nbsp;<a href="../../../2006/10/index.html" title="Next year (2006-10)">&gt;&gt;</a></td>
</tr>
</tfoot>
<tr class="bCalendarRow">
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarCell">1</td>
<td class="bCalendarCell">2</td>
<td class="bCalendarLinkPost"><a href="../03/index.html" title="2 posts">3</a></td>
<td class="bCalendarCell">4</td>
<td class="bCalendarLinkPost"><a href="../05/index.html" title="1 post">5</a></td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">6</td>
<td class="bCalendarCell">7</td>
<td class="bCalendarCell">8</td>
<td class="bCalendarCell">9</td>
<td class="bCalendarCell">10</td>
<td class="bCalendarCell">11</td>
<td class="bCalendarLinkPost"><a href="../12/index.html" title="1 post">12</a></td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarLinkPost"><a href="../13/index.html" title="1 post">13</a></td>
<td class="bCalendarCell">14</td>
<td class="bCalendarCell">15</td>
<td class="bCalendarCell">16</td>
<td class="bCalendarLinkPost"><a href="../17/index.html" title="1 post">17</a></td>
<td class="bCalendarCell">18</td>
<td class="bCalendarLinkPost"><a href="index.html" title="3 posts">19</a></td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">20</td>
<td class="bCalendarCell">21</td>
<td class="bCalendarCell">22</td>
<td class="bCalendarLinkPost"><a href="../23/index.html" title="1 post">23</a></td>
<td class="bCalendarCell">24</td>
<td class="bCalendarLinkPost"><a href="../25/index.html" title="1 post">25</a></td>
<td class="bCalendarCell">26</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">27</td>
<td class="bCalendarCell">28</td>
<td class="bCalendarCell">29</td>
<td class="bCalendarCell">30</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
</tr>
</table></div>
<div class="postBox"><div class="boxTop">Archives</div><ul><li><a href="../../../2007/12/index.html">December 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/11/index.html">November 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../../2007/10/index.html">October 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/09/index.html">September 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../../2007/08/index.html">August 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="../../../2007/05/index.html">May  2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/04/index.html">April 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="../../../2007/03/index.html">March 2007</a> <span class="dimmed">(5)</span></li>
<li><a href="../../../2007/02/index.html">February 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2007/01/index.html">January 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="../../../2006/10/index.html">October 2006</a> <span class="dimmed">(2)</span></li>
<li><a href="../../../2006/08/index.html">August 2006</a> <span class="dimmed">(1)</span></li>
<li><a href="../../../../all1579.html?disp=arcdir">More...</a></li>
</ul>
</div>

<!-- =============== SEARCH BOX ======================== --> 
<div class="boxTop">Search</div>
<div class="postBox"><form action="http://blog.eikke.com/index.php/all" method="get" id="searchform">	<br />	<div align="center"><input class="search" size="15" name="s" /><br />
        <input type="submit" value="Search" name="submit" class="btn"  />
        </div>
</form>
</div>
<div class="postBox">
<h3 class="boxTop">Who's Online?</h3>
	<ul class="onlineUsers"><li>Guest Users: 352</li></ul>	</div>

			
<div class="boxTop">Syndicate this blog <img src="../../../../../img/xml.html" alt="XML" width="36" height="14" class="middle" /></div>               
	<div class="postBox">
RSS 0.92: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all7f88.html?tempskin=_rss&amp;disp=comments">Comments</a>
<br />
RSS 1.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all374e.html?tempskin=_rdf&amp;disp=comments">Comments</a>
<br />
RSS 2.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all6fea.html?tempskin=_rss2&amp;disp=comments">Comments</a>
<br />
Atom: <a href="http://eikke.com/feed/">Posts</a>, <a href="../../../../all5609.html?tempskin=_atom&amp;disp=comments">Comments</a>
</div>		

<!-- Menu footer -->
<br /> <div align="center">powered by<br />
<a href="http://b2evolution.net/" title="b2evolution home"><img src="../../../../../img/b2evolution_logo_80.html" alt="b2evolution" width="80" height="17" border="0" class="middle" /></a></div>
				</div>
						
						
				<div id="mainbar">

<h2>Archives for: November <a href="../../index.html">2005</a>, 19</h2><!-- 
== START OF MAIN AREA
====== -->

<h2>11/19/05</h2><div class="bPost" lang="en-US">
		<div class="title">OOo2 on 770</div>
	<div class="bText">
		<p><a href="../../../../realnitro/2005/11/19/remote_x_on_nokia_770_schreenshots.html" title="Nice work">Nice work</a>, <a href="http://www.realnitro.be/" title="RealNitro">RealNitro</a>!</p>			</div>
         <div class="bSmallPrint">
	  <a href="../../../../ikke/2005/11/19/ooo2_on_770.html" title="Permanent link to full entry" class="permalink_right"><img src="../../../../../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="../../../../all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  09:17:00 pm	  .

          23 Words          .
	  
	<a href="../../../../ikke8e7f.html?cat=19" title="true">Desktop</a>  
	.
		.
	1059 views	
	 . <a href="../../../../ikke/2005/11/19/ooo2_on_770.html#comments" title="Display comments / Leave a comment">5 comments</a>	  	</div>
	</div>
<div class="bPost" lang="nl-BE">
		<div class="title">Remote X on Nokia 770: schreenshots</div>
	<div class="bText">
		<p>Due to the fact that the <a href="http://koti.welho.com/jpavelek/tmp/770/" title="screenshot tool">screenshot tool</a> had a bug at the time I gave remote X windows a try on the N770, I could't post any 'proof'.</p>

<p>But, that screenshot-bug has been solved, and I connected my N770 to the fresh install of <a href="http://ubuntulinux.org/" title="Ubuntu Linux">Ubuntu Linux</a> so I could take shoot some screens. It took me about 4 minutes to make my N770 talk to the pc (Ubuntu recognised my usb bluetooth key immediately, it really wasn't hard at all). I installed the openssh-server on the pc (enabled it in Synaptic, and pressed Apply, easy stuff), started it, and logged in with my N770.</p>

<p>This time I used some new command line options (thank you <a href="../../../../realnitro/2005/11/17/remote_x_sessions_on_nokia_770.html#c3544" title="daf">daf</a>):</p>
<blockquote><p><code>ssh -X user@server -c blowfish -C</code></p></blockquote>
<p>And I started <a href="http://www.openoffice.org/" title="oowriter2">oowriter2</a> again:<br />
<center><img src="http://www.realnitro.be/files/screens/n770_ooo_1_small.png" alt="oowriter2 starting..." title="oowriter2 starting..." /><br />
(<a href="http://www.realnitro.be/files/screens/n770_ooo_1.png" title="Larger image">Larger image</a>)</center></p>

<p>and a few seconds later (the pc is quite old):</p>

<p><center><img src="http://www.realnitro.be/files/screens/n770_ooo_2_small.png" alt="oowriter2 on N770" title="oowriter2 on N770" /><br />
(<a href="http://www.realnitro.be/files/screens/n770_ooo_2.png" title="Larger image">Larger image</a>)</center></p>

<p>Then I gave The Gimp another try, but the lag was still there. It was better a bit faster than without the compression settings for the ssh connection, but nowhere near usable. :-(</p>

<p>btw, has anyone tried <a href="http://shop.brando.com.hk/btsmartkeyboard.php" title="this keyboard">this keyboard</a> with the N770 yet? Does it work? Or should/will it work? Plz let me know!</p>			</div>
         <div class="bSmallPrint">
	  <a href="../../../../realnitro/2005/11/19/remote_x_on_nokia_770_schreenshots.html" title="Permanent link to full entry" class="permalink_right"><img src="../../../../../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="../../../../all7441.html?author=" title="Browse all posts by this author">RealNitro</a>

          .
	  19:54:46	  .

          261 Words          .
	  
	<a href="../../../../realnitrod11d.html?cat=54" title="true">Coding</a>  
	.
	 <a href="../../../../all7ab6.html?disp=msgform&amp;recipient_id=9&amp;post_id=426&amp;redirect_to=http%3A%2F%2Fblog.eikke.com%2Findex.php%2Fall%2F2005%2F11%2F19%2F%3Fblog%3D1%26amp%3Bm%3D20051119%26amp%3Bpage%3D1" title="Send email to post author"><img src="../../../../../rsc/icons/envelope.gif" border="0" align="top" width="13" height="10"  class="middle" title="Send email to post author" alt="Email"/></a> 	.
	1229 views	
		  	</div>
	</div>
<div class="bPost" lang="en-US">
		<div class="title">Small Valgrind introduction</div>
	<div class="bText">
		<p>Everyone writing C or C++ code should know what a memory leak is. You allocate some memory, and never free it.<br />
It can be very hard to make your code memleak free, or even just to know whether your code contains any memleaks.<br />
Luckily, in the Free Software world, we got a great tool to check our code for memleaks (or other errors): <a href="http://valgrind.org/" title="Valgrind">Valgrind</a>.</p>

<p>As I don't have time to write a lot now, I'll just give a very simple sample of it's usage.</p>

<p>Here's my code (very bad code, obviously, but hey ;-)):</p>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

static void function() {
        char *test = (char *)malloc(100 * sizeof(char));
        test[0] = '\0';

        printf("Function\n");

        /* Leaking 100 chars here, 100 bytes */
}

int main(int argc, char *argv[]) {
        int *i = NULL;

        function();
        i = (int *)malloc(50 * sizeof(int));
        printf("Done\n");

        return 0;

        /* Leaking 50 ints here. On x86, this is 50*4=200 bytes */
}
</code></pre>
<p>As you can see, we leak memory twice: once 100 bytes, once 200.<br />
Let's compile and run our code:</p>
<pre>$ gcc -o test -Wall -g test.c
$ ./test
Function
Done</pre>
<p>Great, our code works fine (or at least, it looks like it).</p>

<p>Now we introduce valgrind. First we'll do a simple memory allocation check:</p>
<pre>$ valgrind --tool=memcheck ./test ==18819== Memcheck, a memory error detector for x86-linux.
==18819== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==18819== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==18819== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==18819== For more details, rerun with: -v
==18819==
Function
Done
==18819==
==18819== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 13 from 1)
==18819== malloc/free: in use at exit: 300 bytes in 2 blocks.
==18819== malloc/free: 2 allocs, 0 frees, 300 bytes allocated.
==18819== For a detailed leak analysis,  rerun with: --leak-check=yes
==18819== For counts of detected errors, rerun with: -v</pre>
<p>Valgrind tells us we leaked 300 bytes, in 2 blocks (one malloc call returns one block, obviously).<br />
It also tells us to re-run the test with the --leak-check=yes flag, which is a good advice:</p>
<pre>$ valgrind --tool=memcheck --leak-check=yes ./test
==18826== Memcheck, a memory error detector for x86-linux.
==18826== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==18826== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==18826== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==18826== For more details, rerun with: -v
==18826==
Function
Done
==18826==
==18826== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 13 from 1)
==18826== malloc/free: in use at exit: 300 bytes in 2 blocks.
==18826== malloc/free: 2 allocs, 0 frees, 300 bytes allocated.
==18826== For counts of detected errors, rerun with: -v
==18826== searching for pointers to 2 not-freed blocks.
==18826== checked 1404368 bytes.
==18826==
==18826== 100 bytes in 1 blocks are definitely lost in loss record 1 of 2
==18826==    at 0x1B906B82: malloc (vg_replace_malloc.c:131)
==18826==    by 0x80483B5: function (test.c:5)
==18826==    by 0x80483F4: main (test.c:14)
==18826==
==18826==
==18826== 200 bytes in 1 blocks are definitely lost in loss record 2 of 2
==18826==    at 0x1B906B82: malloc (vg_replace_malloc.c:131)
==18826==    by 0x8048400: main (test.c:15)
==18826==
==18826== LEAK SUMMARY:
==18826==    definitely lost: 300 bytes in 2 blocks.
==18826==    possibly lost:   0 bytes in 0 blocks.
==18826==    still reachable: 0 bytes in 0 blocks.
==18826==         suppressed: 0 bytes in 0 blocks.
==18826== Reachable blocks (those to which a pointer was found) are not shown.
==18826== To see them, rerun with: --show-reachable=yes</pre>
<p>Great, here Valgrind tells us exactly what we're doing wrong.<br />
There are 2 blocks where we leak memory:</p>
<ul><li><p>The first one is at code path<br />
main (test.c:14) -> function (test.c:5) -> malloc (vg_replace_malloc.c:131)<br />
leaking 100 bytes.<br />
The vg_replace_malloc.c file isn't ours, it's a valgrind file where the malloc() wrapper (which keeps track of our allocations/free's/...) is located. We're mostly interested in the "function (test.c:5)" part. If we look at line 5, we see this is</p>
<pre><code>char *test = (char *)malloc(100 * sizeof(char));</code></pre>our first allocation. And indeed, if we look further, we never free these 100 chars.</li>
<li>Second is at main (test.c:15). Again, we can look at this line:<pre><code>i = (int *)malloc(50 * sizeof(int));</code></pre>and indeed, we never free these allocated integers again. We allocated 50 ints, and on x86 one int is 32 bits (4 bytes), so we leak 200 bytes (and valgrind was correct once again :-)).</li></ul>
<p>Obviously, valgrind got much more options or checks:</p>
<pre>$ valgrind
valgrind: Missing --tool option
Available tools:
        memcheck
        addrcheck
        cachegrind
        corecheck
        helgrind
        massif
        lackey
        none
        callgrind
valgrind: Use --help for more information.</pre><p>I don't know all of them, actually I only use the memcheck thing, but even when only using one tool, it can be a very useful program.</p>

<p>I got one minor issue with valgrind currently: when it detects memory leaks in some program, it still returns 0 in the end, so it's not easy to integrate valgrind checks in automake's "make check" target. If someone got any pointers how to do this, please let me know!</p>			</div>
         <div class="bSmallPrint">
	  <a href="../../../../ikke/2005/11/19/small_valgrind_introduction.html" title="Permanent link to full entry" class="permalink_right"><img src="../../../../../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="../../../../all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  03:53:33 pm	  .

          761 Words          .
	  
	<a href="../../../../ikkec055.html?cat=17" title="true">Linux</a>, <a href="../../../../ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	2158 views	
	 . <a href="../../../../ikke/2005/11/19/small_valgrind_introduction.html#comments" title="Display comments / Leave a comment">13 comments</a>	  	</div>
	</div>

<p class="center"><strong>
		</strong></p>

	
							
						
		  </div>
		
  </div>
  <br clear="all" />
  <div id="footer">
  <!-- This is the footer. Put all your copyright info here. -->
  <br />
  Design by <a href="http://www.jameskoster.co.uk/">James Koster</a>, Evoskin by <a href="http://www.brendoman.com/dbc">Danny Ferguson</a></div>
</center>
</body>

<!-- Mirrored from blog.eikke.com/index.php/all/2005/11/19/ by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:33:14 GMT -->
</html>
