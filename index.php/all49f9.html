<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<!-- Mirrored from blog.eikke.com/index.php/all?blog=1&cat=17 by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:25:01 GMT -->
<head> 
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>
	All Blogs - Category: Linux</title>
<base  />
<meta name="description" content="" />
<meta name="keywords" content="ikke eikke blog" />
<meta name="generator" content="b2evolution 1.8.6" /> <!-- Please leave this for stats -->
<link rel="alternate" type="text/xml" title="RDF" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS .92" href="http://eikke.com/feed/" />
<link rel="alternate" type="text/xml" title="RSS 2.0" href="http://eikke.com/feed/" />
<link rel="alternate" type="application/atom+xml" title="Atom" href="http://eikke.com/feed/" />
<link rel="pingback" href="../xmlsrv/xmlrpc.php" />
<link rel="stylesheet" href="../skins/plain/style.css" type="text/css" />

</head>

<body>
<a name="top" id="top"></a>
<center>
		<div id="menu">
				<a href="all.html" title="The blog front page">home</a>
<a href="../htsrv/login7380.html?redirect_to=http%3A%2F%2Fblog.eikke.com%2Findex.php%2Fall%3Fblog%3D1%26amp%3Bcat%3D17" title="Login if you have an account...">Login...</a>
<a href="all03a1.html?disp=comments">Last comments</a>
		</div>
		
		<div id="header">


      <h1><a href="all.html" style="border:0px;">All Blogs</a></h1>
      <h2></h2>
		</div>
		
		<div id="content">
		
				
				<div id="sidebar">
<div class="submenu">
<div class="boxTop">&nbsp;</div><div class="menuBox"><a href="all.html" class="menuItem" title="All Blogs">Blog All</a>
<a href="ikke.html" class="menuItem" title="Ikke&#039;s Blog">Ikke</a>
<a href="fedorastateless.html" class="menuItem" title="Fedora Stateless @ UGent">FSU</a>
<a href="realnitro.html" class="menuItem" title="RealNitro&#039;s Blog">RealNitro</a>
<a href="http://peterdedecker.net/blog/index.php" class="menuItem" title="Peter&#039;s Blog">Peter</a>
</div></div>

		<p></p>
<div class="postBox"><div class="boxTop">Categories</div><h4><a href="all.html">All Blogs</a></h4>
<h4><a href="ikke.html">Ikke's Blog</a></h4>
<ul><li><a href="allb5e7.html?cat=15">Life</a> <span class="notes">(56)</span></li>
<li><a href="all3f99.html?cat=16">Technology</a> <span class="notes">(131)</span><ul><li><a href="all3cd0.html?cat=49">Coding Corner</a> <span class="notes">(64)</span><ul><li><a href="allbff0.html?cat=52">Docbook</a> <span class="notes">(7)</span></li>
<li><a href="alle864.html?cat=63">Summer of Code 06</a> <span class="notes">(0)</span></li>
</ul>
</li>
<li><a href="all8e7f.html?cat=19">Desktop</a> <span class="notes">(93)</span></li>
<li><a href="all7f33.html?cat=31">Ivman</a> <span class="notes">(3)</span></li>
<li><a href="allc055.html?cat=17">Linux</a> <span class="notes">(90)</span>*</li>
<li><a href="all6c5d.html?cat=18">Networks</a> <span class="notes">(14)</span></li>
</ul>
</li>
</ul>
<h4><a href="fedorastateless.html">Fedora Stateless @ UGent</a></h4>
<ul><li><a href="allede2.html?cat=32">General</a> <span class="notes">(10)</span></li>
<li><a href="allb97c.html?cat=30">Nifty solutions</a> <span class="notes">(3)</span></li>
<li><a href="allaeb3.html?cat=29">Problems we encounter</a> <span class="notes">(9)</span></li>
<li><a href="allb60a.html?cat=27">Project status and progress</a> <span class="notes">(13)</span></li>
</ul>
<h4><a href="realnitro.html">RealNitro's Blog</a></h4>
<ul><li><a href="alld11d.html?cat=54">Coding</a> <span class="notes">(9)</span></li>
<li><a href="allc733.html?cat=38">Fun</a> <span class="notes">(2)</span></li>
<li><a href="all97dc.html?cat=33">Gaming</a> <span class="notes">(4)</span><ul><li><a href="all9ad7.html?cat=35">CUBE</a> <span class="notes">(3)</span></li>
<li><a href="all9591.html?cat=37">Max Payne</a> <span class="notes">(0)</span></li>
<li><a href="alla88f.html?cat=36">RTCW:ET</a> <span class="notes">(2)</span></li>
</ul>
</li>
<li><a href="allf528.html?cat=47">Life</a> <span class="notes">(11)</span></li>
<li><a href="all8dbd.html?cat=50">Linux</a> <span class="notes">(7)</span></li>
<li><a href="all489b.html?cat=34">Webdesign</a> <span class="notes">(4)</span></li>
</ul>
<h4><a href="http://peterdedecker.net/blog/index.php">Peter's Blog</a></h4>
<ul><li><a href="all363a.html?cat=45">Free Software</a> <span class="notes">(9)</span><ul><li><a href="allb0b4.html?cat=48">Jabber</a> <span class="notes">(4)</span></li>
<li><a href="all51fa.html?cat=40">Linux</a> <span class="notes">(9)</span><ul><li><a href="allffca.html?cat=41">My Gentoo</a> <span class="notes">(19)</span></li>
<li><a href="allf170.html?cat=53">Ubuntu@AMD64</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="all434a.html?cat=57">Workgroup Free Software</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="alle7dd.html?cat=59">Internet &amp; Blogs</a> <span class="notes">(12)</span></li>
<li><a href="alle8fb.html?cat=39">Life &amp; Fun</a> <span class="notes">(47)</span></li>
<li><a href="all1e3b.html?cat=55">Politics</a> <span class="notes">(16)</span><ul><li><a href="allfa15.html?cat=51">EU Software Patents</a> <span class="notes">(8)</span></li>
<li><a href="all848d.html?cat=58">N-VA</a> <span class="notes">(4)</span></li>
</ul>
</li>
<li><a href="all667c.html?cat=43">Studies</a> <span class="notes">(23)</span><ul><li><a href="all493d.html?cat=62">Siemens</a> <span class="notes">(13)</span></li>
</ul>
</li>
<li><a href="alle868.html?cat=60">UGent &amp; Stuver</a> <span class="notes">(18)</span></li>
<li><a href="allac94.html?cat=42">VTK</a> <span class="notes">(10)</span></li>
</ul>

</div>
<div class="boxTop"><a href="all03a1.html?disp=comments">Last comments</a></div>
<div class="postBox">	

  <ul>
<li>- louboutin on <a href="ikke/2005/12/23/crosswords.html#c11861" title="permalink to comment">Crosswords</a>

</li>
<li>- rhinestone motif on <a href="ikke/2005/11/19/ooo2_on_770.html#c11860" title="permalink to comment">OOo2 on 770</a>

</li>
<li>- richard on <a href="ikke/2007/05/08/openoffice_rant.html#c11859" title="permalink to comment">OpenOffice rant</a>

</li>
<li>- Tom on <a href="ikke/2005/01/31/gob_signals_walkthrough.html#c11858" title="permalink to comment">GOB signals walkthrough</a>

</li>
<li>- Tom on <a href="ikke/2005/01/31/gob_signals_walkthrough.html#c11857" title="permalink to comment">GOB signals walkthrough</a>

</li>
        </ul>
</div>

<div class="postBox"><table class="bCalendarTable" cellspacing="0" summary="Monthly calendar with links to each day's posts">
<caption class="bCalendarCaption"><a href="all/2012/12/index.html" title="go to month's archive">December 2012</a></caption>
<thead><tr class="bCalendarRow">
<th class="bCalendarHeaderCell" abbr="Sunday" scope="col" title="Sunday">Sun</th>
<th class="bCalendarHeaderCell" abbr="Monday" scope="col" title="Monday">Mon</th>
<th class="bCalendarHeaderCell" abbr="Tuesday" scope="col" title="Tuesday">Tue</th>
<th class="bCalendarHeaderCell" abbr="Wednesday" scope="col" title="Wednesday">Wed</th>
<th class="bCalendarHeaderCell" abbr="Thursday" scope="col" title="Thursday">Thu</th>
<th class="bCalendarHeaderCell" abbr="Friday" scope="col" title="Friday">Fri</th>
<th class="bCalendarHeaderCell" abbr="Saturday" scope="col" title="Saturday">Sat</th>
</tr></thead>
<tfoot>
<tr>
<td colspan="3" id="prev"><a href="all/2007/12/index.html" title="Previous year (2007-12)">&lt;&lt;</a>&nbsp;<a href="all/2007/12/index.html" title="Previous month (2007-12)">&lt;</a></td>
<td class="pad">&nbsp;</td>
<td colspan="3" id="next">&nbsp;&nbsp;</td>
</tr>
</tfoot>
<tr class="bCalendarRow">
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarCell">1</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">2</td>
<td class="bCalendarCell">3</td>
<td class="bCalendarCell">4</td>
<td class="bCalendarCell">5</td>
<td class="bCalendarCell">6</td>
<td class="bCalendarCell">7</td>
<td class="bCalendarCell">8</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">9</td>
<td class="bCalendarCell">10</td>
<td id="bCalendarToday">11</td>
<td class="bCalendarCell">12</td>
<td class="bCalendarCell">13</td>
<td class="bCalendarCell">14</td>
<td class="bCalendarCell">15</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">16</td>
<td class="bCalendarCell">17</td>
<td class="bCalendarCell">18</td>
<td class="bCalendarCell">19</td>
<td class="bCalendarCell">20</td>
<td class="bCalendarCell">21</td>
<td class="bCalendarCell">22</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">23</td>
<td class="bCalendarCell">24</td>
<td class="bCalendarCell">25</td>
<td class="bCalendarCell">26</td>
<td class="bCalendarCell">27</td>
<td class="bCalendarCell">28</td>
<td class="bCalendarCell">29</td>
</tr>
<tr class="bCalendarRow">
<td class="bCalendarCell">30</td>
<td class="bCalendarCell">31</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
<td class="bCalendarEmptyCell">&nbsp;</td>
</tr>
</table></div>
<div class="postBox"><div class="boxTop">Archives</div><ul><li><a href="all/2007/12/index.html">December 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="all/2007/11/index.html">November 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="all/2007/10/index.html">October 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="all/2007/09/index.html">September 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="all/2007/08/index.html">August 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="all/2007/05/index.html">May  2007</a> <span class="dimmed">(2)</span></li>
<li><a href="all/2007/04/index.html">April 2007</a> <span class="dimmed">(4)</span></li>
<li><a href="all/2007/03/index.html">March 2007</a> <span class="dimmed">(5)</span></li>
<li><a href="all/2007/02/index.html">February 2007</a> <span class="dimmed">(2)</span></li>
<li><a href="all/2007/01/index.html">January 2007</a> <span class="dimmed">(3)</span></li>
<li><a href="all/2006/10/index.html">October 2006</a> <span class="dimmed">(2)</span></li>
<li><a href="all/2006/08/index.html">August 2006</a> <span class="dimmed">(1)</span></li>
<li><a href="all1579.html?disp=arcdir">More...</a></li>
</ul>
</div>

<!-- =============== SEARCH BOX ======================== --> 
<div class="boxTop">Search</div>
<div class="postBox"><form action="http://blog.eikke.com/index.php/all" method="get" id="searchform">	<br />	<div align="center"><input class="search" size="15" name="s" /><br />
        <input type="submit" value="Search" name="submit" class="btn"  />
        </div>
</form>
</div>
<div class="postBox">
<h3 class="boxTop">Who's Online?</h3>
	<ul class="onlineUsers"><li>Guest Users: 391</li></ul>	</div>

			
<div class="boxTop">Syndicate this blog <img src="../img/xml.html" alt="XML" width="36" height="14" class="middle" /></div>               
	<div class="postBox">
RSS 0.92: <a href="http://eikke.com/feed/">Posts</a>, <a href="all7f88.html?tempskin=_rss&amp;disp=comments">Comments</a>
<br />
RSS 1.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="all374e.html?tempskin=_rdf&amp;disp=comments">Comments</a>
<br />
RSS 2.0: <a href="http://eikke.com/feed/">Posts</a>, <a href="all6fea.html?tempskin=_rss2&amp;disp=comments">Comments</a>
<br />
Atom: <a href="http://eikke.com/feed/">Posts</a>, <a href="all5609.html?tempskin=_atom&amp;disp=comments">Comments</a>
</div>		

<!-- Menu footer -->
<br /> <div align="center">powered by<br />
<a href="http://b2evolution.net/" title="b2evolution home"><img src="../img/b2evolution_logo_80.html" alt="b2evolution" width="80" height="17" border="0" class="middle" /></a></div>
				</div>
						
						
				<div id="mainbar">

<h2>Category: Linux</h2><!-- 
== START OF MAIN AREA
====== -->

<h2>11/08/07</h2><div class="bPost" lang="en-US">
		<div class="title">Clutter reflections</div>
	<div class="bText">
		<p><img src="http://linode2.nicolast.be/files/gallery-reflection-lt.png" alt="Clutter reflections" /></p>

<p>See src/view-reflection.c in your local gallery git clone. Suboptimal code, no slideshow (only displays the first picture for a given tag), but well.</p>

<p>Maybe I should try to load images (using GdkPixbuf or something alike), use GEGL to do some transforms on them (more optimized than my hackish filters :-P), then use these transformed images on a Clutter texture...</p>

<p>I wonder how hard it would be to play a movie using clutter-gst and add reflections of it.</p>			</div>
         <div class="bSmallPrint">
	  <a href="ikke/2007/11/08/clutter_reflections.html" title="Permanent link to full entry" class="permalink_right"><img src="../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  01:12:18 pm	  .

          79 Words          .
	  
	<a href="ikkec055.html?cat=17" title="true">Linux</a>, <a href="ikke8e7f.html?cat=19" title="true">Desktop</a>, <a href="ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	3411 views	
	 . <a href="ikke/2007/11/08/clutter_reflections.html#comments" title="Display comments / Leave a comment">Leave a comment</a>	  	</div>
	</div>
<div class="bPost" lang="en-US">
		<div class="title">Clutter, advanced UI graphics made fun</div>
	<div class="bText">
		<p>Today I looked at <a href="http://www.clutter-project.org/">Clutter</a>, a nifty "rich UI" creation library using OpenGL and the like. After playing around with some of the samples, reading some API docs and writing one dumb simple text-rotating application (think Windows' text-message screensaver, you know), I wanted to make something more advanced (hum-hum).</p>

<p>I decided writing some photo slideshow application would be cool. We already have several of those, obviously, remember this is just a playground.<br />
Having some sort of <a href="http://f-spot.org/">F-Spot</a> (a great photo management application) integration would be nifty too, so I started with that: loading taglists and picture-paths for one tag. In the end it turned out writing that took more time than writing the simple view I created.</p>

<p>Next I wrote the Clutter driver code and some system to be able to easily switch view functions. I only implemented one so far, which just fades between images (in, out, next image in, out etc) and stores the GdkPixbuf's in a ringbuffer. Not optimal, no cleanup code yet, jadajadajada.</p>

<p>No screenshots as a static screenshot would not be very impressive (the current application neither but hey ;-)).</p>

<p>Anyway, it might be useful as a sample/basic Clutter application for some people. You can find the source code, clone URL and compilation instructions <a href="http://git.nicolast.be/?p=gallery.git;a=summary">here</a>. If you implement some nifty view, share it!</p>

<p>Enjoy.</p>			</div>
         <div class="bSmallPrint">
	  <a href="ikke/2007/11/08/clutter_advanced_ui_graphics_made_fun.html" title="Permanent link to full entry" class="permalink_right"><img src="../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  02:54:57 am	  .

          219 Words          .
	  
	<a href="ikkec055.html?cat=17" title="true">Linux</a>, <a href="ikke8e7f.html?cat=19" title="true">Desktop</a>, <a href="ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	2907 views	
	 . <a href="ikke/2007/11/08/clutter_advanced_ui_graphics_made_fun.html#comments" title="Display comments / Leave a comment">6 comments</a>	  	</div>
	</div>
<h2>08/15/07</h2><div class="bPost" lang="en-US">
		<div class="title">ASUS laptops, multimedia keys and INPUT</div>
	<div class="bText">
		<p>For quite a while on several systems where ACPI is used to deliver key press events to the operating system (mostly laptops, that's why we got the asus_acpi, thinkpad, toshiba, sony,... drivers in the kernel). In userspace acpid was used then to fetch these commands, a callout script was used which used some application to inject the corresponding keycode (based on the ACPI event ID, which is just "randomly chosen" by the hardware manufacturers) on some input device, so applications (eg your X server) were able to see the key press events. Especially the acpid -> callout -> map scancode to keycode -> inject in input device isn't such a "nice" solution, but it worked, most of the time.</p>

<p>Recently people (one of them Richard Hughes of GPM fame, you know, that power-eating applet ;-)) started to rework these in-kernel drivers to use the kernel input subsystem directly, so no more round-trip to userspace would be necessary.<br />
There are 2 possibilities here: you can store a scancode to keycode mapping table in the driver itself, or you can remap scancodes to a keycode from userspace on some device using ioctl's.</p>

<p>This last method is made easy by HAL (0.5.10 or git), which includes a callout which allows you to store the mappings in an FDI file, and then performs the remapping when a matched device is found on the system. More information about this can be found <a href="http://people.freedesktop.org/~hughsient/quirk/quirk-keymap-index.html">here</a>.</p>

<p>IMHO this method is the cleanest, as it doesn't force us to store big device-specific mapping tables in the kernel driver. It's userspace so much easier to make changes, add new device information,...</p>

<p>ASUS laptop owners couldn't make use of this yet as nor the in-kernel driver, asus_laptop, or it's -cvs version provide relaying to a kernel input device. Yesterday I decided to implement this, and today it got somewhat finished, after some minor issues. You can find the resulting patch <a href="http://linode2.nicolast.be/files/asus_acpi_to_input.patch">here</a>, it's against current acpi4asus CVS, but I think it should apply cleanly against a vanilla kernel too. I'll submit it to the acpi4asus list tomorrow. Git repository is <a href="http://git.nicolast.be/?p=acpi4asus.git;a=summary">here</a>, you want the "acpi_keys_to_input_layer_no_internal_mapping" branch.</p>

<p>After compiling the driver and insmoding it (or modprobe if you install it too, make sure you don't load the old version by accident) you should see some information in dmesg: a message the driver is loaded, the name of your laptop model, and the fact a new input device called "Asus Extra Buttons" was created. Now when you press some multimedia buttons and check dmesg again, it should tell you some keys were pressed it can't map to a known keycode, also providing the scancode. You can use this information to generate an FDI file as described in the pages I linked to before.</p>

<p>If you're using an "old" HAL version, you can download a small utility <a href="http://git.nicolast.be/?p=acpi4asus.git;a=blob;f=samples/set-asus-keymap.c;h=f16345124c297beb6f11259fc0ff59267be5a93d;hb=acpi_keys_to_input_layer_no_internal_mapping">here</a> to emulate HAL's behaviour using hard-coded information. You need to make a list of scancodes and their meaning using KEY_* values. You can find these constants in /usr/include/linux/input.h, or in include/linux/input.h of your local kernel source tree.<br />
Once you know which scancodes map to which KEY_* value, you can add them to the "mappings" variable defined at the top of the C file. The format is simple: scancode1, keycode1, scancode2, keycode2,...,-1. Make sure you always add pairs of scancode/keycode values, and end the array with a -1.</p>

<p>Once you entered the values, compile the program (gcc -o set-asus-keymap set-asus-keymap.c), figure out the event device node for the Asus Extra Buttons device (check /proc/bus/input/devices, where Name is Asus Extra Buttons, see which eventX is after Handlers), and run the program (as root) using ./set-asus-keymap /dev/event/eventX (now I don't want *any* comments on this entry regarding "I have no eventX node").</p>

<p>When you're done with this, create a nice FDI file too, and send it to the HAL mailing list so others can enjoy your research too :-)</p>

<p>That's about it, your special keys should "just work" and acpid is no longer necessary to handle them.</p>			</div>
         <div class="bSmallPrint">
	  <a href="ikke/2007/08/15/asus_laptops_multimedia_keys_and_input.html" title="Permanent link to full entry" class="permalink_right"><img src="../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  02:09:04 am	  .

          684 Words          .
	  
	<a href="ikkec055.html?cat=17" title="true">Linux</a>, <a href="ikke8e7f.html?cat=19" title="true">Desktop</a>, <a href="ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	6328 views	
	 . <a href="ikke/2007/08/15/asus_laptops_multimedia_keys_and_input.html#comments" title="Display comments / Leave a comment">7 comments</a>	  	</div>
	</div>
<h2>04/28/07</h2><div class="bPost" lang="en-US">
		<div class="title">How to fix your ACPI buttons, the hackish way</div>
	<div class="bText">
		<p>Some time ago my ACPI-driven laptop keyboard buttons (volume control, music player controls,...) stopped working. I'm using the acpi-support package (although not running a Debian derivate) driven by acpid.<br />
Today I decided I wanted my buttons back, so I started to find out what was going wrong.</p>

<p>The issue: acpi_fakekey checks all /dev/input/eventX devices whether or not it's a keyboard device, and if it finds one, it writes the necessary scancode to this device. Since some recent kernel, /dev/input/event0 is no longer my AT keyboard, but one of these ACPI buttons, so writing scancodes to the device won't work: my X server keyboard driver won't see them.</p>

<p>/proc/bus/input/devices told me I need event4 (or use this command: hal-get-property --udi `hal-find-by-capability --capability input | grep KBD` --key input.device | sed "s:/dev/input/event::g"<br />
). Patching acpi_fakekey.c is pretty trivial:</p>

<pre><code>--- acpi-support-0.94/acpi_fakekey.c.orig       2007-04-28 18:09:37.078953488 +0200
+++ acpi-support-0.94/acpi_fakekey.c    2007-04-28 18:09:49.578470914 +0200
@@ -13,7 +13,7 @@
         char filename[32];
         char key_bitmask[(KEY_MAX + 7) / 8];
 
-        for (i=0; i&lt;32; i++) {
+        for (i=4; i&lt;32; i++) {
                 snprintf(filename,sizeof(filename), "/dev/input/event%d", i);
 
                 fd = open(filename, O_RDWR);
</code></pre>
<p>Replace the 4 with the correct number on your system.</p>

<p>Now my buttons "work" again. Patching acpi_fakekey so it uses HAL to figure out the correct device to write to might be somewhat more reasonable though :-)</p>			</div>
         <div class="bSmallPrint">
	  <a href="ikke/2007/04/28/how_to_fix_your_acpi_buttons_the_hackish.html" title="Permanent link to full entry" class="permalink_right"><img src="../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  06:30:08 pm	  .

          224 Words          .
	  
	<a href="ikkec055.html?cat=17" title="true">Linux</a>, <a href="ikke8e7f.html?cat=19" title="true">Desktop</a>, <a href="ikke3cd0.html?cat=49" title="true">Coding Corner</a>  
	.
		.
	2289 views	
	 . <a href="ikke/2007/04/28/how_to_fix_your_acpi_buttons_the_hackish.html#comments" title="Display comments / Leave a comment">1 comment</a>	  	</div>
	</div>
<h2>03/22/07</h2><div class="bPost" lang="en-US">
		<div class="title">Who's abusing my SATA controller?</div>
	<div class="bText">
		<p>Just read <a href="http://tinyurl.com/2tsr95" title="this">this</a> interesting post. Had to change the read command somewhat to match my dmesg format (timestamps, you know).</p>

<p>Anyway, here's the result:<br />
<code>$ su -<br />
# /etc/init.d/syslog-ng stop<br />
# echo 1 &gt; /proc/sys/vm/block_dump<br />
# echo "Wait some time here, just use your desktop as usual"<br />
# dmesg | gawk '/(READ|WRITE|dirtied)/ {activity[$3]++} END {for (x in activity) print activity[x],x}'| sort -nr | head -n 10 | gawk '{print $2 " " $1}'<br />
pdflush(215): 160<br />
evolution(7736): 149<br />
pdflush(7670): 126<br />
firefox-bin(7748): 26<br />
gaim(7146): 12<br />
jfsCommit(221): 5<br />
gconfd-2(7114): 5<br />
mono(7200): 4<br />
mono(7199): 4<br />
jfsIO(220): 4<br />
# echo 0 &gt; /proc/sys/vm/block_dump<br />
# /etc/init.d/syslog-ng start<br />
# exit</code></p>			</div>
         <div class="bSmallPrint">
	  <a href="ikke/2007/03/22/who_s_abusing_my_sata_controller.html" title="Permanent link to full entry" class="permalink_right"><img src="../skins/plain/images/chain_link.gif" alt="Permalink" width="14" height="14" border="0" class="middle" /></a>
	  .
          <a href="all7441.html?author=" title="Browse all posts by this author">Ikke</a>

          .
	  01:38:24 pm	  .

          98 Words          .
	  
	<a href="ikke3f99.html?cat=16" title="true">Technology</a>, <a href="ikkec055.html?cat=17" title="true">Linux</a>  
	.
		.
	3075 views	
	 . <a href="ikke/2007/03/22/who_s_abusing_my_sata_controller.html#comments" title="Display comments / Leave a comment">4 comments</a>	  	</div>
	</div>

<p class="center"><strong>
	 :: <a href="all1846.html?blog=1&amp;cat=17&amp;page=1&amp;paged=2">Next Page &gt;&gt;</a>	</strong></p>

	
							
						
		  </div>
		
  </div>
  <br clear="all" />
  <div id="footer">
  <!-- This is the footer. Put all your copyright info here. -->
  <br />
  Design by <a href="http://www.jameskoster.co.uk/">James Koster</a>, Evoskin by <a href="http://www.brendoman.com/dbc">Danny Ferguson</a></div>
</center>
</body>

<!-- Mirrored from blog.eikke.com/index.php/all?blog=1&cat=17 by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 19:25:01 GMT -->
</html>
